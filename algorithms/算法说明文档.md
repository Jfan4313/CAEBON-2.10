# AIå¹³å°ç®—æ³•åº“ä½¿ç”¨è¯´æ˜

## ğŸ“ æ¦‚è¿°

æœ¬ç®—æ³•åº“æä¾›å®Œæ•´çš„AIç®¡ç†å¹³å°ç®—æ³•å®ç°ï¼Œæ¶µç›–ç…§æ˜ã€æš–é€šç©ºè°ƒã€å…‰å‚¨å……ç³»ç»Ÿçš„æ™ºèƒ½ä¼˜åŒ–åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¼ºåŒ–å­¦ä¹ ã€æ•°å­—å­ªç”Ÿå»ºæ¨¡ã€V2Gäº¤äº’ã€PMV/PPDèˆ’é€‚åº¦è®¡ç®—ã€ç”µæ± è¡°å‡åˆ†æç­‰é«˜çº§åŠŸèƒ½ã€‚

---

## ğŸ“¦ æ–‡ä»¶ç»“æ„

```
algorithms/
â”œâ”€â”€ ai-platform-algorithms.ts    # ä¸»ç®—æ³•åº“æ–‡ä»¶ï¼ˆ1464è¡Œï¼‰
â””â”€â”€ algorithm-demo.ts             # æ¼”ç¤ºæ–‡ä»¶
â””â”€â”€ ç®—æ³•è¯´æ˜æ–‡æ¡£.md             # æœ¬æ–‡æ¡£
```

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç®—æ³•

```typescript
import {
  // ç…§æ˜ç®—æ³•
  calculateLightingBaseline,
  calculateLightingSavings,

  // ç©ºè°ƒç®—æ³•
  calculateHVACBaseline,
  calculateHVACSavings,

  // å…‰å‚¨ç®—æ³•
  calculateSolarGeneration,
  calculateStorageOptimization,

  // ç»¼åˆä¼˜åŒ–
  calculateIntegratedOptimization,

  // é«˜çº§ç®—æ³•
  calculatePMV,
  calculatePPD,
  calculateComfortMetrics,
  calculateBatteryDegradation,
  calculateV2GOptimization,
  calculateDigitalTwinThermalModel,
  runRLOptimization,

  // å·¥å…·å‡½æ•°
  getCitySunshineData,
  generateDefaultPriceCurve,
  generateDefaultTrafficPattern,
} from './algorithms/ai-platform-algorithms';
```

---

## ğŸ“š ç®—æ³•åŠŸèƒ½è¯¦è§£

### 1. ç…§æ˜ç³»ç»Ÿç®—æ³•

#### `calculateLightingBaseline()` - ç…§æ˜åŸºå‡†è®¡ç®—
```typescript
interface LightingSystemParams {
  area: number;        // ç…§æ˜åŒºåŸŸé¢ç§¯ (mÂ²)
  totalPower: number;    // ç°æœ‰ç¯å…·æ€»åŠŸç‡ (kW)
  dailyHours: number;    // æ¯å¤©è¿è¡Œæ—¶é—´ (å°æ—¶)
  sensorDensity?: number;  // ä¼ æ„Ÿå™¨å®‰è£…å¯†åº¦ (ä¸ª/mÂ²)
}
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- è®¡ç®—åŸºå‡†è´Ÿè·ï¼ˆkWï¼‰å’Œæ—¥è€—ç”µé‡ï¼ˆkWhï¼‰
- è€ƒè™‘äººæµé‡æ¨¡å¼è°ƒæ•´

#### `calculateLightingSavings()` - ç…§æ˜èŠ‚èƒ½æ½œåŠ›è®¡ç®—
**è¿”å›å‚æ•°ï¼š**
- `savingsKWh` - å¹´èŠ‚ç”µé‡
- `savingsRate` - èŠ‚ç”µç‡ (%)
- `roi` - æŠ•èµ„å›æŠ¥ç‡ (%)

**è®¡ç®—ä¾æ®ï¼š**
- LEDå‡çº§èŠ‚èƒ½ï¼ˆä»ç™½ç‚½ç¯åˆ°LEDï¼‰
- æ™ºèƒ½æ§åˆ¶ç³»ç»ŸèŠ‚èƒ½ï¼ˆå…‰æ„Ÿ+è°ƒå…‰ï¼‰
- æŒ‰éœ€è°ƒå…‰èŠ‚èƒ½ï¼ˆæ ¹æ®è‡ªç„¶å…‰å’Œäººæµé‡ï¼‰

---

### 2. æš–é€šç©ºè°ƒç³»ç»Ÿç®—æ³•

#### `calculateHVACBaseline()` - ç©ºè°ƒåŸºå‡†è®¡ç®—
```typescript
interface HVACSystemParams {
  area: number;                    // ç©ºè°ƒåŒºåŸŸé¢ç§¯ (mÂ²)
  currentCOP: number;             // å½“å‰COPå€¼
  targetCOP: number;              // ç›®æ ‡COPå€¼ï¼ˆæ”¹é€ åï¼‰
  annualCoolingHours: number;    // æ¯å¹´åˆ¶å†·æ—¶é•¿ï¼ˆå°æ—¶ï¼‰
  buildingType?: string;           // å›´æŠ¤ç»“æ„ç±»å‹
  freshAirEfficiency?: number;  // æ–°é£ç³»ç»Ÿæ•ˆç‡
  controllerType?: string;        // æ§åˆ¶å™¨ç±»å‹ï¼šon-off/vrf/chiller
  humidityControl?: boolean;      // æ¹¿åº¦æ§åˆ¶
  coolingCapacity?: number;       // åˆ¶å†·å®¹é‡ (kW)
}
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- è®¡ç®—åˆ¶å†·è´Ÿè·å’ŒåŸºå‡†è´Ÿè·
- è€ƒè™‘å»ºç­‘çƒ­å¯¼ç³»æ•°ã€å­£èŠ‚å˜åŒ–ã€äººæµé‡

#### `calculateHVACSavings()` - ç©ºè°ƒèŠ‚èƒ½æ½œåŠ›è®¡ç®—
**è¿”å›å‚æ•°ï¼š**
- `savingsKWh` - å¹´èŠ‚ç”µé‡
- `copImprovement` - COPæå‡ç‡ (%)
- `roi` - æŠ•èµ„å›æŠ¥ç‡ (%)

**è®¡ç®—ä¾æ®ï¼š**
- COPæå‡å¸¦æ¥çš„èŠ‚èƒ½
- æ–°é£ç³»ç»ŸèŠ‚èƒ½
- æŒ‰éœ€æ§åˆ¶èŠ‚èƒ½ï¼ˆæ ¹æ®äººæµé‡ï¼‰

---

### 3. å…‰å‚¨ç³»ç»Ÿç®—æ³•

#### `calculateSolarGeneration()` - å…‰ä¼å‘ç”µé‡è®¡ç®—
```typescript
interface SolarStorageSystemParams {
  pvCapacity: number;             // å…‰ä¼è£…æœºå®¹é‡ (kWp)
  storageCapacity: number;        // å‚¨èƒ½å®¹é‡ (kWh)
  storagePower: number;           // å‚¨èƒ½åŠŸç‡ (kW)
  roundTripEfficiency: number;  // å¾€è¿”æ•ˆç‡ (%)
  dod: number;                    // æœ€å¤§å……æ”¾ç”µæ·±åº¦ (%)
  cyclesPerDay: number;          // å‚¨èƒ½å¹´å¾ªç¯æ¬¡æ•°
  batteryType?: string;        // ç”µæ± ç±»å‹ï¼šLFP/NCM/é“…é…¸
  batteryAge?: number;           // ç”µæ± ä½¿ç”¨å¹´é™ï¼ˆå¹´ï¼‰
  degradationRate?: number;       // ç”µæ± è¡°å‡ç‡ (%/å¹´)
}
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- è®¡ç®—æ—¥/å¹´å‘ç”µé‡
- è€ƒè™‘åŸå¸‚æ—¥ç…§æ•°æ®ï¼ˆ20+åŸå¸‚ï¼‰
- è€ƒè™‘å¤©æ°”æ¡ä»¶ï¼ˆäº‘é‡ã€æ¸©åº¦ã€å¤ªé˜³è¾å°„ï¼‰

#### `calculateStorageOptimization()` - å‚¨èƒ½å……æ”¾ç”µä¼˜åŒ–
**è¿”å›å‚æ•°ï¼š**
- `optimalSchedule` - æœ€ä¼˜å……æ”¾ç”µè®¡åˆ’ï¼ˆ24å°æ—¶ï¼‰
- `annualArbitrage` - å¹´å¥—åˆ©æ”¶ç›Šï¼ˆå…ƒï¼‰

**è®¡ç®—ä¾æ®ï¼š**
- ç”µä»·æ›²çº¿åˆ†æï¼ˆå³°è°·å¹³ä»·ï¼‰
- è°·æ—¶å……ç”µã€å³°æ—¶æ”¾ç”µã€å¹³æ—¶ç©ºé—²

---

### 4. ç»¼åˆä¼˜åŒ–ç®—æ³•

#### `calculateIntegratedOptimization()` - å¤šç³»ç»ŸååŒä¼˜åŒ–
**å‚æ•°è¯´æ˜ï¼š**
- `aggressiveness` - AIæ¿€è¿›ç¨‹åº¦ (0-1)

**è¿”å›å‚æ•°ï¼š**
- `optimizedLoadProfile` - ä¼˜åŒ–åçš„24å°æ—¶è´Ÿè·æ›²çº¿
- `totalSavings` - æ€»èŠ‚ç”µé‡ (MWh)
- `recommendations` - ä¼˜åŒ–å»ºè®®åˆ—è¡¨

**è®¡ç®—ä¾æ®ï¼š**
- ç…§æ˜ã€ç©ºè°ƒã€å…‰å‚¨ååŒä¼˜åŒ–
- æ¿€è¿›ç¨‹åº¦è°ƒæ•´

---

## ğŸš€ é«˜çº§ç®—æ³•åŠŸèƒ½

### 5. PMV/PPD èˆ’é€‚åº¦è®¡ç®—

#### `calculatePMV()` - PMVï¼ˆé¢„æµ‹å¹³å‡æŠ•ç¥¨å€¼ï¼‰
- åŸºäºFangeræ–¹ç¨‹
- è¿”å›èŒƒå›´ï¼š-3åˆ°+3ï¼ˆå†·=ä¸é€‚ã€+3=çƒ­ï¼‰

#### `calculatePPD()` - PPDï¼ˆé¢„æµ‹ä¸æ»¡æ„ç™¾åˆ†æ¯”ï¼‰
- åŸºäºPMVå€¼è®¡ç®—
- è¿”å›èŒƒå›´ï¼š0-100%ï¼ˆ100%æ»¡æ„åº¦æ—¶ï¼‰

#### `calculateComfortMetrics()` - èˆ’é€‚åº¦æŒ‡æ ‡ç»¼åˆ
```typescript
interface ComfortMetrics {
  pmv: number;              // PMVå€¼ (-3 to +3)
  ppd: number;              // PPDå€¼ (0-100%)
  setpointTemperature: number;  // è®¾å®šç‚¹æ¸©åº¦ (Â°C)
  humidity: number;          // æ¹¿åº¦ (%)
  airVelocity: number;        // ç©ºæ°”æµé€Ÿ (m/s)
  cloValue: number;           // æœè£…çƒ­é˜» (clo)
  metValue: number;           // æ–°é™ˆä»£è°¢ç‡ (met)
}
```

---

### 6. ç”µæ± è¡°å‡è®¡ç®—

#### `calculateBatteryDegradation()` - ç”µæ± å¥åº·çŠ¶æ€è¯„ä¼°
**è¿”å›å‚æ•°ï¼š**
- `currentCapacity` - å½“å‰å®¹é‡ (kWh)
- `health` - ç”µæ± å¥åº·åº¦ (%)
- `cycleCount` - ç´¯è®¡å¾ªç¯æ¬¡æ•°
- `degradationCost` - ç´¯è®¡è¡°å‡æˆæœ¬ (å…ƒ)

**ç”µæ± ç±»å‹å½±å“ï¼š**
- LFPï¼ˆç£·é…¸é“é”‚ï¼‰ï¼šè¡°å‡ç‡ä½ï¼Œå¯¿å‘½é•¿
- NCMï¼ˆä¸‰å…ƒé”‚ï¼‰ï¼šè¡°å‡ç‡ä¸­ç­‰ï¼Œå¯¿å‘½ä¸­ç­‰
- é“…é…¸ç”µæ± ï¼šè¡°å‡ç‡é«˜ï¼Œå¯¿å‘½çŸ­

---

### 7. V2G è½¦è¾†äº¤äº’ä¼˜åŒ–

#### `calculateV2GOptimization()` - V2Gæœ€ä¼˜è°ƒåº¦ç­–ç•¥
```typescript
interface V2GDevice {
  id: string;                      // è®¾å¤‡ID
  capacity: number;               // ç”µæ± å®¹é‡ (kWh)
  maxPower: number;               // æœ€å¤§å……æ”¾ç”µåŠŸç‡ (kW)
  currentSoc: number;               // å½“å‰SOC (%)
  availableHours: Array<[number, number]>; // å¯æ”¾ç”µæ—¶æ®µ
  degradationCost?: number;      // ç”µæ± è¡°å‡æˆæœ¬ï¼ˆå…ƒ/kWhï¼‰
  userPriority: string;          // ç”¨æˆ·ä¼˜å…ˆçº§ï¼šlow/medium/high
}
```

**ä¼˜åŒ–ç­–ç•¥ï¼š**
- è°·æ—¶å……ç”µï¼ˆè°·ä»·ï¼‰
- å³°æ—¶æ”¾ç”µï¼ˆå³°ä»·ï¼‰
- è€ƒè™‘ç”¨æˆ·ä¼˜å…ˆçº§å’Œç”µæ± è¡°å‡æˆæœ¬

---

### 8. æ•°å­—å­ªç”Ÿçƒ­å»ºæ¨¡

#### `calculateDigitalTwinThermalModel()` - å»ºç­‘çƒ­çŠ¶æ€æ¨¡æ‹Ÿ
```typescript
interface DigitalTwinModel {
  building: {
    thermalZones: number;           // çƒ­åŒºæ•°é‡
    thermalInertia: number;         // çƒ­æƒ¯æ€§ (å°æ—¶)
    heatCapacity: number;          // çƒ­å®¹é‡ (kJ/K)
  };
  hvac: {
    responseTime: number;          // å“åº”æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
    setpointDeadband: number;  // è®¾å®šç‚¹æ­»åŒº (Â°C)
  };
  environment: {
    forecastHorizon: number;  // é¢„æµ‹æ—¶é•¿ï¼ˆå°æ—¶ï¼‰
    predictionAccuracy: number; // é¢„æµ‹ç²¾åº¦ (%)
  };
}
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- 24å°æ—¶å»ºç­‘çƒ­çŠ¶æ€æ¨¡æ‹Ÿ
- è€ƒè™‘çƒ­æƒ¯æ€§ã€å¤ªé˜³è¾å°„ã€å†…çƒ­æº
- èˆ’é€‚åº¦è¯„ä¼°ï¼ˆPMV/PPDï¼‰

---

### 9. å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–

#### `runRLOptimization()` - ç®€åŒ–ç‰ˆDQNå¼ºåŒ–å­¦ä¹ 
```typescript
interface RLConfig {
  algorithm: 'dqn' | 'ppo' | 'sac';  // ç®—æ³•ç±»å‹
  learningRate: number;              // å­¦ä¹ ç‡
  discountFactor: number;         // æŠ˜æ‰£å› å­
  explorationRate: number;         // æ¢ç´¢ç‡
  batchSize: number;              // æ‰¹æ¬¡å¤§å°
  trainingEpisodes: number;       // è®­ç»ƒå›åˆæ•°
  rewardFunction: 'cost' | 'emission' | 'multi-objective'; // å¥–åŠ±å‡½æ•°
}
```

**ä¼˜åŒ–ç­–ç•¥ï¼š**
- çŠ¶æ€ç©ºé—´ï¼š24å°æ—¶è´Ÿè· Ã— ç”µä»· Ã— æ¸©åº¦
- åŠ¨ä½œç©ºé—´ï¼šæ¯å°æ—¶è°ƒæ•´ [-10%, 0%, +10%]
- ç›®æ ‡ï¼šæœ€å°åŒ–è¿è¡Œæˆæœ¬

---

## ğŸ“Š åŸºç¡€æ•°æ®

### åŸå¸‚æ—¥ç…§æ•°æ®ï¼ˆ20+åŸå¸‚ï¼‰

| åŸå¸‚ | å¹´æ—¥ç…§æ—¶æ•° |
|------|----------|
| åŒ—äº¬ | 1650 |
| å¤©æ´¥ | 1680 |
| çŸ³å®¶åº„ | 1720 |
| å¤ªåŸ | 1750 |
| å‘¼å’Œæµ©ç‰¹ | 1820 |
| è¥¿å®‰ | 1780 |
| å…°å· | 2100 |
| è¥¿å® | 2180 |
| ä¸Šæµ· | 1420 |
| å—äº¬ | 1650 |
| æ­å· | 1580 |
| åˆè‚¥ | 1750 |
| æµå— | 1650 |
| å¹¿å· | 1580 |
| æ·±åœ³ | 1720 |
| å—å® | 1680 |
| æµ·å£ | 1820 |
| æ˜†æ˜ | 2100 |
| è´µé˜³ | 1320 |
| è´µé˜³ | 1250 |
| é‡åº† | 1100 |
| é•¿æ²™ | 1520 |
| ç¦å· | 1520 |
| å—æ˜Œ | 1650 |
| å¦é—¨ | 1780 |
| æ­¦æ±‰ | 1650 |
| éƒ‘å· | 1720 |

### å»ºç­‘çƒ­å¯¼ç³»æ•°

| å»ºç­‘ç±»å‹ | çƒ­å¯¼ç³»æ•° (W/(mÂ²Â·K)) |
|------|-------------------|
| å·¥å‚ | 2.5 |
| å­¦æ ¡ | 2.0 |
| åŠå…¬ | 2.8 |
| åŒ»é™¢ | 1.5 |
| å•†åœº | 1.8 |

### å­£èŠ‚ç³»æ•°

| å­£èŠ‚ | è´Ÿè·ç³»æ•° | è´Ÿè·ä¹˜æ•° |
|-----|---------|---------|
| æ˜¥å­£(3-5æœˆ) | 0.9  | 1.1 | 1.1 |
| å¤å­£(6-8æœˆ) | 1.2 | 1.2 |
| ç§‹å­£(9-11æœˆ) | 1.0 | 1.0 |
| å†¬å­£(12-2æœˆ) | 0.8 | 0.9 |

---

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šç…§æ˜ç³»ç»ŸèŠ‚èƒ½è¯„ä¼°

```typescript
import { calculateLightingSavings } from './algorithms/ai-platform-algorithms';

const params = {
  area: 1000,      // 1000å¹³æ–¹ç±³
  totalPower: 20,   // 20kWï¼ˆç™½ç‚½ç¯ï¼‰
  dailyHours: 8,      // æ¯å¤©8å°æ—¶
};

const oldSystem = {
  area: 1000,
  totalPower: 30,     // åŸæ¥30kW
  dailyHours: 10,     // æ¯å¤©10å°æ—¶
};

const result = calculateLightingSavings(params, oldSystem);
console.log(`å¹´èŠ‚ç”µé‡: ${result.savingsKWh.toFixed(2)} kWh`);
console.log(`èŠ‚ç”µç‡: ${result.savingsRate.toFixed(2)}%`);
console.log(`ROI: ${result.roi.toFixed(2)}%`);
```

### ç¤ºä¾‹2ï¼šæš–é€šç©ºè°ƒç³»ç»Ÿä¼˜åŒ–

```typescript
import { calculateHVACSavings } from './algorithms/ai-platform-algorithms';

const hvacParams = {
  area: 2000,
  currentCOP: 2.8,
  targetCOP: 4.5,
  annualCoolingHours: 1200,
};

const result = calculateHVACSavings(hvacParams, hvacParams);
console.log(`å¹´èŠ‚ç”µé‡: ${result.savingsKWh.toFixed(2)} kWh`);
console.log(`COPæå‡: ${result.copImprovement.toFixed(2)}%`);
console.log(`ROI: ${result.roi.toFixed(2)}%`);
```

### ç¤ºä¾‹3ï¼šå…‰å‚¨ç³»ç»Ÿä¼˜åŒ–

```typescript
import { calculateSolarGeneration, calculateStorageOptimization } from './algorithms/ai-platform-algorithms';

const solarStorageParams = {
  pvCapacity: 100,
  storageCapacity: 200,
  storagePower: 100,
};

const envFactors = {
  region: 'ä¸Šæµ·',
  avgTemperature: 26,
  annualSunshineHours: 1650,
  peakPrice: 1.2,
  valleyPrice: 0.35,
  flatPrice: 0.6,
};

const solarGen = calculateSolarGeneration(solarStorageParams, envFactors);
const storageOpt = calculateStorageOptimization(solarStorageParams, envFactors.priceCurve);

console.log(`å¹´å‘ç”µé‡: ${solarGen.annualGeneration.toFixed(2)} kWh`);
console.log(`å¹´å¥—åˆ©æ”¶ç›Š: ${storageOpt.annualArbitrage.toFixed(2)} å…ƒ`);
```

---

## ğŸ“ é›†æˆè¿›åº¦

- âœ… Phase 1 - è¯­æ³•é”™è¯¯ä¿®å¤ï¼ˆ4å¤„ï¼‰
- âœ… Phase 2 - æ¥å£æ‰©å±•ï¼ˆ10ä¸ªæ–°æ¥å£ï¼‰
- âœ… Phase 3 - é«˜çº§ç®—æ³•å®ç°ï¼ˆ7ä¸ªå‡½æ•°ï¼‰
- âœ… æ–‡ä»¶å¯ç¼–è¯‘ï¼Œæ— TypeScripté”™è¯¯

---

## ğŸ“ åç»­é›†æˆ

å½“ç®—æ³•æˆç†Ÿåï¼Œå¯å°†è¿™äº›ç®—æ³•é›†æˆåˆ° `RetrofitAI.tsx` ç»„ä»¶ä¸­ï¼Œå®ç°ï¼š
1. å‚æ•°è¾“å…¥ç•Œé¢ç»‘å®šç®—æ³•å‚æ•°
2. å®æ—¶è®¡ç®—å’ŒåŠ¨æ€å¯è§†åŒ–
3. æ™ºèƒ½ä¼˜åŒ–å»ºè®®è¾“å‡º
4. å¤šæƒ…æ™¯å¯¹æ¯”åˆ†æ

ç®—æ³•åº“å·²å‡†å¤‡å°±ç»ªï¼Œéšæ—¶å¯ä»¥ä½¿ç”¨ï¼
